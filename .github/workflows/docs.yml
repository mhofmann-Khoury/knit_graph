# =============================================================================
# DOCUMENTATION BUILD AND DEPLOYMENT WORKFLOW
# =============================================================================
# This GitHub Actions workflow automatically builds Sphinx documentation
# and deploys it to GitHub Pages.
#
# Triggered on:
# - Push to main branch (updates docs automatically)
# - Manual workflow dispatch (for testing)
# - Releases (ensures docs are updated for new versions)
#
# The workflow:
# 1. Builds Sphinx documentation from source code and docstrings
# 2. Generates API documentation automatically
# 3. Deploys to GitHub Pages for public access
# 4. Handles versioning for releases

name: Documentation

# =============================================================================
# WORKFLOW TRIGGERS
# =============================================================================
on:
  # Build docs on pushes to main branch
  push:
    branches:
      - main
    paths:
      - 'docs/source/**'            # Documentation source files (corrected path)
      - 'src/**'                    # Source code changes (affects API docs)
      - 'pyproject.toml'            # Dependency changes
      - '.github/workflows/docs.yml'  # Workflow changes

  # Build docs on releases for version-specific documentation
  release:
    types: [published]

  # Allow manual triggering
  workflow_dispatch:

# =============================================================================
# WORKFLOW-LEVEL ENVIRONMENT VARIABLES
# =============================================================================
env:
  PYTHON_VERSION: "3.11"           # Python version for building docs
  POETRY_VERSION: "1.8.3"          # Updated Poetry version

# =============================================================================
# WORKFLOW PERMISSIONS
# =============================================================================
permissions:
  contents: read                    # Read repository contents
  pages: write
